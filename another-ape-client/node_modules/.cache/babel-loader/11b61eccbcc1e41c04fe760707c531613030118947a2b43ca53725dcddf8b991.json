{"ast":null,"code":"const axios = require('axios');\nconst {\n  CID\n} = require('multiformats');\nconst {\n  storageEndpoint\n} = require('../config');\nconst convertToV0CID = v1 => {\n  const formattedv1CID = v1.replace(/\\\"/g, '');\n  const c = CID.parse(formattedv1CID);\n  return c.toV0().toString();\n};\nconst hashFromKey = async (bucket, filename) => {\n  const url = `${storageEndpoint}/${bucket}/${filename}`;\n  try {\n    const {\n      headers: {\n        etag: v1CID\n      }\n    } = await axios.head(url);\n    const v0CID = convertToV0CID(v1CID);\n    return v0CID;\n  } catch (e) {\n    return null;\n  }\n};\nmodule.exports = hashFromKey;","map":{"version":3,"names":["axios","require","CID","storageEndpoint","convertToV0CID","v1","formattedv1CID","replace","c","parse","toV0","toString","hashFromKey","bucket","filename","url","headers","etag","v1CID","head","v0CID","e","module","exports"],"sources":["/home/ryanosull/clarity/clarity-camp/projects/nft-vids/another-ape-client/node_modules/@fleekhq/fleek-storage-js/utils/get-hash-from-key.js"],"sourcesContent":["const axios = require('axios');\nconst { CID } = require('multiformats');\n\nconst { storageEndpoint } = require('../config');\n\nconst convertToV0CID = (v1) => {\n  const formattedv1CID = v1.replace(/\\\"/g, '');\n  const c = CID.parse(formattedv1CID);\n  return c.toV0().toString();\n};\n\nconst hashFromKey = async (bucket, filename) => {\n  const url = `${storageEndpoint}/${bucket}/${filename}`\n\n  try {\n    const { headers: { etag: v1CID } } = await axios.head(url);\n    const v0CID = convertToV0CID(v1CID);\n    return v0CID;\n  } catch(e) {\n    return null;\n  }\n}\n\nmodule.exports = hashFromKey;\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC9B,MAAM;EAAEC;AAAI,CAAC,GAAGD,OAAO,CAAC,cAAc,CAAC;AAEvC,MAAM;EAAEE;AAAgB,CAAC,GAAGF,OAAO,CAAC,WAAW,CAAC;AAEhD,MAAMG,cAAc,GAAIC,EAAE,IAAK;EAC7B,MAAMC,cAAc,GAAGD,EAAE,CAACE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EAC5C,MAAMC,CAAC,GAAGN,GAAG,CAACO,KAAK,CAACH,cAAc,CAAC;EACnC,OAAOE,CAAC,CAACE,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;AAC5B,CAAC;AAED,MAAMC,WAAW,GAAG,MAAAA,CAAOC,MAAM,EAAEC,QAAQ,KAAK;EAC9C,MAAMC,GAAG,GAAI,GAAEZ,eAAgB,IAAGU,MAAO,IAAGC,QAAS,EAAC;EAEtD,IAAI;IACF,MAAM;MAAEE,OAAO,EAAE;QAAEC,IAAI,EAAEC;MAAM;IAAE,CAAC,GAAG,MAAMlB,KAAK,CAACmB,IAAI,CAACJ,GAAG,CAAC;IAC1D,MAAMK,KAAK,GAAGhB,cAAc,CAACc,KAAK,CAAC;IACnC,OAAOE,KAAK;EACd,CAAC,CAAC,OAAMC,CAAC,EAAE;IACT,OAAO,IAAI;EACb;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGX,WAAW"},"metadata":{},"sourceType":"script","externalDependencies":[]}