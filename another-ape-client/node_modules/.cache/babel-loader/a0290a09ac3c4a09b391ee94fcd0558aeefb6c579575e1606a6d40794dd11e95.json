{"ast":null,"code":"var AWS = require('./core');\nrequire('./http');\nvar inherit = AWS.util.inherit;\nvar getMetadataServiceEndpoint = require('./metadata_service/get_metadata_service_endpoint');\nvar URL = require('url').URL;\n\n/**\n * Represents a metadata service available on EC2 instances. Using the\n * {request} method, you can receieve metadata about any available resource\n * on the metadata service.\n *\n * You can disable the use of the IMDS by setting the AWS_EC2_METADATA_DISABLED\n * environment variable to a truthy value.\n *\n * @!attribute [r] httpOptions\n *   @return [map] a map of options to pass to the underlying HTTP request:\n *\n *     * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n *       before aborting the connection. Set to 0 for no timeout.\n *\n * @!macro nobrowser\n */\nAWS.MetadataService = inherit({\n  /**\n   * @return [String] the endpoint of the instance metadata service\n   */\n  endpoint: getMetadataServiceEndpoint(),\n  /**\n   * @!ignore\n   */\n\n  /**\n   * Default HTTP options. By default, the metadata service is set to not\n   * timeout on long requests. This means that on non-EC2 machines, this\n   * request will never return. If you are calling this operation from an\n   * environment that may not always run on EC2, set a `timeout` value so\n   * the SDK will abort the request after a given number of milliseconds.\n   */\n  httpOptions: {\n    timeout: 0\n  },\n  /**\n   * when enabled, metadata service will not fetch token\n   */\n  disableFetchToken: false,\n  /**\n   * Creates a new MetadataService object with a given set of options.\n   *\n   * @option options host [String] the hostname of the instance metadata\n   *   service\n   * @option options httpOptions [map] a map of options to pass to the\n   *   underlying HTTP request:\n   *\n   *   * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n   *     before aborting the connection. Set to 0 for no timeout.\n   * @option options maxRetries [Integer] the maximum number of retries to\n   *   perform for timeout errors\n   * @option options retryDelayOptions [map] A set of options to configure the\n   *   retry delay on retryable errors. See AWS.Config for details.\n   * @option options ec2MetadataV1Disabled [boolean] Whether to block IMDS v1 fallback.\n   * @option options profile [string] A profile to check for IMDSv1 fallback settings.\n   * @option options filename [string] Optional filename for the config file.\n   */\n  constructor: function MetadataService(options) {\n    if (options && options.host) {\n      options.endpoint = 'http://' + options.host;\n      delete options.host;\n    }\n    this.profile = options && options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.ec2MetadataV1Disabled = !!(options && options.ec2MetadataV1Disabled);\n    this.filename = options && options.filename;\n    AWS.util.update(this, options);\n  },\n  /**\n   * Sends a request to the instance metadata service for a given resource.\n   *\n   * @param path [String] the path of the resource to get\n   *\n   * @param options [map] an optional map used to make request\n   *\n   *   * **method** (String) &mdash; HTTP request method\n   *\n   *   * **headers** (map<String,String>) &mdash; a map of response header keys and their respective values\n   *\n   * @callback callback function(err, data)\n   *   Called when a response is available from the service.\n   *   @param err [Error, null] if an error occurred, this value will be set\n   *   @param data [String, null] if the request was successful, the body of\n   *     the response\n   */\n  request: function request(path, options, callback) {\n    if (arguments.length === 2) {\n      callback = options;\n      options = {};\n    }\n    if (process.env[AWS.util.imdsDisabledEnv]) {\n      callback(new Error('EC2 Instance Metadata Service access disabled'));\n      return;\n    }\n    path = path || '/';\n\n    // Verify that host is a valid URL\n    if (URL) {\n      new URL(this.endpoint);\n    }\n    var httpRequest = new AWS.HttpRequest(this.endpoint + path);\n    httpRequest.method = options.method || 'GET';\n    if (options.headers) {\n      httpRequest.headers = options.headers;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n  /**\n  * @api private\n  */\n  loadCredentialsCallbacks: [],\n  /**\n   * Fetches metadata token used for authenticating against the instance metadata service.\n   *\n   * @callback callback function(err, token)\n   *   Called when token is loaded from the resource\n   */\n  fetchMetadataToken: function fetchMetadataToken(callback) {\n    var self = this;\n    var tokenFetchPath = '/latest/api/token';\n    self.request(tokenFetchPath, {\n      'method': 'PUT',\n      'headers': {\n        'x-aws-ec2-metadata-token-ttl-seconds': '21600'\n      }\n    }, callback);\n  },\n  /**\n   * Fetches credentials\n   *\n   * @api private\n   * @callback cb function(err, creds)\n   *   Called when credentials are loaded from the resource\n   */\n  fetchCredentials: function fetchCredentials(options, cb) {\n    var self = this;\n    var basePath = '/latest/meta-data/iam/security-credentials/';\n    var isImdsV1Fallback = self.disableFetchToken || !(options && options.headers && options.headers['x-aws-ec2-metadata-token']);\n    if (isImdsV1Fallback && !process.env.AWS_EC2_METADATA_DISABLED) {\n      try {\n        var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader, this.filename);\n        var profileSettings = profiles[this.profile] || {};\n      } catch (e) {\n        profileSettings = {};\n      }\n      if (profileSettings.ec2_metadata_v1_disabled && profileSettings.ec2_metadata_v1_disabled !== 'false') {\n        return cb(AWS.util.error(new Error('AWS EC2 Metadata v1 fallback has been blocked by AWS config file profile.')));\n      }\n      if (self.ec2MetadataV1Disabled) {\n        return cb(AWS.util.error(new Error('AWS EC2 Metadata v1 fallback has been blocked by AWS.MetadataService::options.ec2MetadataV1Disabled=true.')));\n      }\n      if (process.env.AWS_EC2_METADATA_V1_DISABLED && process.env.AWS_EC2_METADATA_V1_DISABLED !== 'false') {\n        return cb(AWS.util.error(new Error('AWS EC2 Metadata v1 fallback has been blocked by process.env.AWS_EC2_METADATA_V1_DISABLED.')));\n      }\n    }\n    self.request(basePath, options, function (err, roleName) {\n      if (err) {\n        self.disableFetchToken = !(err.statusCode === 401);\n        cb(AWS.util.error(err, {\n          message: 'EC2 Metadata roleName request returned error'\n        }));\n        return;\n      }\n      roleName = roleName.split('\\n')[0]; // grab first (and only) role\n      self.request(basePath + roleName, options, function (credErr, credData) {\n        if (credErr) {\n          self.disableFetchToken = !(credErr.statusCode === 401);\n          cb(AWS.util.error(credErr, {\n            message: 'EC2 Metadata creds request returned error'\n          }));\n          return;\n        }\n        try {\n          var credentials = JSON.parse(credData);\n          cb(null, credentials);\n        } catch (parseError) {\n          cb(parseError);\n        }\n      });\n    });\n  },\n  /**\n   * Loads a set of credentials stored in the instance metadata service\n   *\n   * @api private\n   * @callback callback function(err, credentials)\n   *   Called when credentials are loaded from the resource\n   *   @param err [Error] if an error occurred, this value will be set\n   *   @param credentials [Object] the raw JSON object containing all\n   *     metadata from the credentials resource\n   */\n  loadCredentials: function loadCredentials(callback) {\n    var self = this;\n    self.loadCredentialsCallbacks.push(callback);\n    if (self.loadCredentialsCallbacks.length > 1) {\n      return;\n    }\n    function callbacks(err, creds) {\n      var cb;\n      while ((cb = self.loadCredentialsCallbacks.shift()) !== undefined) {\n        cb(err, creds);\n      }\n    }\n    if (self.disableFetchToken) {\n      self.fetchCredentials({}, callbacks);\n    } else {\n      self.fetchMetadataToken(function (tokenError, token) {\n        if (tokenError) {\n          if (tokenError.code === 'TimeoutError') {\n            self.disableFetchToken = true;\n          } else if (tokenError.retryable === true) {\n            callbacks(AWS.util.error(tokenError, {\n              message: 'EC2 Metadata token request returned error'\n            }));\n            return;\n          } else if (tokenError.statusCode === 400) {\n            callbacks(AWS.util.error(tokenError, {\n              message: 'EC2 Metadata token request returned 400'\n            }));\n            return;\n          }\n        }\n        var options = {};\n        if (token) {\n          options.headers = {\n            'x-aws-ec2-metadata-token': token\n          };\n        }\n        self.fetchCredentials(options, callbacks);\n      });\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.MetadataService;","map":{"version":3,"names":["AWS","require","inherit","util","getMetadataServiceEndpoint","URL","MetadataService","endpoint","httpOptions","timeout","disableFetchToken","constructor","options","host","profile","process","env","AWS_PROFILE","defaultProfile","ec2MetadataV1Disabled","filename","update","request","path","callback","arguments","length","imdsDisabledEnv","Error","httpRequest","HttpRequest","method","headers","handleRequestWithRetries","loadCredentialsCallbacks","fetchMetadataToken","self","tokenFetchPath","fetchCredentials","cb","basePath","isImdsV1Fallback","AWS_EC2_METADATA_DISABLED","profiles","getProfilesFromSharedConfig","iniLoader","profileSettings","e","ec2_metadata_v1_disabled","error","AWS_EC2_METADATA_V1_DISABLED","err","roleName","statusCode","message","split","credErr","credData","credentials","JSON","parse","parseError","loadCredentials","push","callbacks","creds","shift","undefined","tokenError","token","code","retryable","module","exports"],"sources":["/home/ryanosull/clarity/clarity-camp/projects/nft-vids/another-ape-client/node_modules/aws-sdk/lib/metadata_service.js"],"sourcesContent":["var AWS = require('./core');\nrequire('./http');\nvar inherit = AWS.util.inherit;\nvar getMetadataServiceEndpoint = require('./metadata_service/get_metadata_service_endpoint');\nvar URL = require('url').URL;\n\n/**\n * Represents a metadata service available on EC2 instances. Using the\n * {request} method, you can receieve metadata about any available resource\n * on the metadata service.\n *\n * You can disable the use of the IMDS by setting the AWS_EC2_METADATA_DISABLED\n * environment variable to a truthy value.\n *\n * @!attribute [r] httpOptions\n *   @return [map] a map of options to pass to the underlying HTTP request:\n *\n *     * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n *       before aborting the connection. Set to 0 for no timeout.\n *\n * @!macro nobrowser\n */\nAWS.MetadataService = inherit({\n  /**\n   * @return [String] the endpoint of the instance metadata service\n   */\n  endpoint: getMetadataServiceEndpoint(),\n\n  /**\n   * @!ignore\n   */\n\n  /**\n   * Default HTTP options. By default, the metadata service is set to not\n   * timeout on long requests. This means that on non-EC2 machines, this\n   * request will never return. If you are calling this operation from an\n   * environment that may not always run on EC2, set a `timeout` value so\n   * the SDK will abort the request after a given number of milliseconds.\n   */\n  httpOptions: { timeout: 0 },\n\n  /**\n   * when enabled, metadata service will not fetch token\n   */\n  disableFetchToken: false,\n\n  /**\n   * Creates a new MetadataService object with a given set of options.\n   *\n   * @option options host [String] the hostname of the instance metadata\n   *   service\n   * @option options httpOptions [map] a map of options to pass to the\n   *   underlying HTTP request:\n   *\n   *   * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n   *     before aborting the connection. Set to 0 for no timeout.\n   * @option options maxRetries [Integer] the maximum number of retries to\n   *   perform for timeout errors\n   * @option options retryDelayOptions [map] A set of options to configure the\n   *   retry delay on retryable errors. See AWS.Config for details.\n   * @option options ec2MetadataV1Disabled [boolean] Whether to block IMDS v1 fallback.\n   * @option options profile [string] A profile to check for IMDSv1 fallback settings.\n   * @option options filename [string] Optional filename for the config file.\n   */\n  constructor: function MetadataService(options) {\n    if (options && options.host) {\n      options.endpoint = 'http://' + options.host;\n      delete options.host;\n    }\n    this.profile = options && options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.ec2MetadataV1Disabled = !!(options && options.ec2MetadataV1Disabled);\n    this.filename = options && options.filename;\n    AWS.util.update(this, options);\n  },\n\n  /**\n   * Sends a request to the instance metadata service for a given resource.\n   *\n   * @param path [String] the path of the resource to get\n   *\n   * @param options [map] an optional map used to make request\n   *\n   *   * **method** (String) &mdash; HTTP request method\n   *\n   *   * **headers** (map<String,String>) &mdash; a map of response header keys and their respective values\n   *\n   * @callback callback function(err, data)\n   *   Called when a response is available from the service.\n   *   @param err [Error, null] if an error occurred, this value will be set\n   *   @param data [String, null] if the request was successful, the body of\n   *     the response\n   */\n  request: function request(path, options, callback) {\n    if (arguments.length === 2) {\n      callback = options;\n      options = {};\n    }\n\n    if (process.env[AWS.util.imdsDisabledEnv]) {\n      callback(new Error('EC2 Instance Metadata Service access disabled'));\n      return;\n    }\n\n    path = path || '/';\n\n    // Verify that host is a valid URL\n    if (URL) { new URL(this.endpoint); }\n\n    var httpRequest = new AWS.HttpRequest(this.endpoint + path);\n    httpRequest.method = options.method || 'GET';\n    if (options.headers) {\n      httpRequest.headers = options.headers;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n\n  /**\n  * @api private\n  */\n  loadCredentialsCallbacks: [],\n\n  /**\n   * Fetches metadata token used for authenticating against the instance metadata service.\n   *\n   * @callback callback function(err, token)\n   *   Called when token is loaded from the resource\n   */\n  fetchMetadataToken: function fetchMetadataToken(callback) {\n    var self = this;\n    var tokenFetchPath = '/latest/api/token';\n    self.request(\n      tokenFetchPath,\n      {\n        'method': 'PUT',\n        'headers': {\n          'x-aws-ec2-metadata-token-ttl-seconds': '21600'\n        }\n      },\n      callback\n    );\n  },\n\n  /**\n   * Fetches credentials\n   *\n   * @api private\n   * @callback cb function(err, creds)\n   *   Called when credentials are loaded from the resource\n   */\n  fetchCredentials: function fetchCredentials(options, cb) {\n    var self = this;\n    var basePath = '/latest/meta-data/iam/security-credentials/';\n\n    var isImdsV1Fallback = self.disableFetchToken\n      || !(options && options.headers && options.headers['x-aws-ec2-metadata-token']);\n\n    if (isImdsV1Fallback && !(process.env.AWS_EC2_METADATA_DISABLED)) {\n      try {\n        var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader, this.filename);\n        var profileSettings = profiles[this.profile] || {};\n      } catch (e) {\n        profileSettings = {};\n      }\n\n      if (profileSettings.ec2_metadata_v1_disabled && profileSettings.ec2_metadata_v1_disabled !== 'false') {\n        return cb(AWS.util.error(\n          new Error('AWS EC2 Metadata v1 fallback has been blocked by AWS config file profile.')\n        ));\n      }\n\n      if (self.ec2MetadataV1Disabled) {\n        return cb(AWS.util.error(\n          new Error('AWS EC2 Metadata v1 fallback has been blocked by AWS.MetadataService::options.ec2MetadataV1Disabled=true.')\n        ));\n      }\n\n      if (process.env.AWS_EC2_METADATA_V1_DISABLED && process.env.AWS_EC2_METADATA_V1_DISABLED !== 'false') {\n        return cb(AWS.util.error(\n          new Error('AWS EC2 Metadata v1 fallback has been blocked by process.env.AWS_EC2_METADATA_V1_DISABLED.')\n        ));\n      }\n    }\n\n    self.request(basePath, options, function (err, roleName) {\n      if (err) {\n        self.disableFetchToken = !(err.statusCode === 401);\n        cb(AWS.util.error(\n          err,\n          {\n            message: 'EC2 Metadata roleName request returned error'\n          }\n        ));\n        return;\n      }\n      roleName = roleName.split('\\n')[0]; // grab first (and only) role\n      self.request(basePath + roleName, options, function (credErr, credData) {\n        if (credErr) {\n          self.disableFetchToken = !(credErr.statusCode === 401);\n          cb(AWS.util.error(\n            credErr,\n            {\n              message: 'EC2 Metadata creds request returned error'\n            }\n          ));\n          return;\n        }\n        try {\n          var credentials = JSON.parse(credData);\n          cb(null, credentials);\n        } catch (parseError) {\n          cb(parseError);\n        }\n      });\n    });\n  },\n\n  /**\n   * Loads a set of credentials stored in the instance metadata service\n   *\n   * @api private\n   * @callback callback function(err, credentials)\n   *   Called when credentials are loaded from the resource\n   *   @param err [Error] if an error occurred, this value will be set\n   *   @param credentials [Object] the raw JSON object containing all\n   *     metadata from the credentials resource\n   */\n  loadCredentials: function loadCredentials(callback) {\n    var self = this;\n    self.loadCredentialsCallbacks.push(callback);\n    if (self.loadCredentialsCallbacks.length > 1) { return; }\n\n    function callbacks(err, creds) {\n      var cb;\n      while ((cb = self.loadCredentialsCallbacks.shift()) !== undefined) {\n        cb(err, creds);\n      }\n    }\n\n    if (self.disableFetchToken) {\n      self.fetchCredentials({}, callbacks);\n    } else {\n      self.fetchMetadataToken(function(tokenError, token) {\n        if (tokenError) {\n          if (tokenError.code === 'TimeoutError') {\n            self.disableFetchToken = true;\n          } else if (tokenError.retryable === true) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned error'\n              }\n            ));\n            return;\n          } else if (tokenError.statusCode === 400) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned 400'\n              }\n            ));\n            return;\n          }\n        }\n        var options = {};\n        if (token) {\n          options.headers = {\n            'x-aws-ec2-metadata-token': token\n          };\n        }\n        self.fetchCredentials(options, callbacks);\n      });\n\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.MetadataService;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}